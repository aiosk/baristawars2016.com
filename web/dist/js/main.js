"use strict";var isProd="192.168.2.50"!==window.location.hostname&&"localhost"!==window.location.hostname,urlBase="192.168.2.50:8080";isProd&&(urlBase="api.baristawars2016.com/public"),urlBase="http://"+urlBase;var fullpageRebuild=function(){null!=$.fn.fullpage.reBuild&&$.fn.fullpage.reBuild()},getRegistrationForm=function(){var e=!1,t=$("#section2"),a=void 0,i=void 0;$.ajax({url:urlBase+"/helper/time",dataType:"json",beforeSend:function(){t.find(".parsley-errors-list.filled").remove().end()},success:function(t){e=t.registrationOpen,e||(a=t.registration.start.split(" ")[0]+" - "+t.registration.end.split(" ")[0],a=TemplateForm.notOpen(a))},error:function(e){a=Template.flash(!1,e.statusText)},complete:function(){t.find(".mdl-progress").hide();var r=t.find("form");if(e||(t.find(".mdl-card__supporting-text").empty().append(a),r=t.find("#form_registration")),0===r.length)t.find(".mdl-card__actions.mdl-card--border").remove();else{r.find("#register_dob").datepicker({changeMonth:!0,changeYear:!0,minDate:"-80y",maxDate:"-5y",yearRange:"-100:-5",dateFormat:"yy-mm-dd",onSelect:function(e,t){var a=t.input;a.closest(".mdl-textfield").removeClass("is-invalid").addClass("is-dirty")}}),r.on("click tap touchstart","label[for=register_picture]",function(e){$(e.target);$("#register_picture").trigger("click tap touchstart")}).on("change","#register_picture",function(e){var t=$(e.target),a=t.closest(".mdl-card").find(".mdl-card__title"),i=t[0];if(console.log(a),i.files&&i.files[0]){var r=new FileReader;r.onload=function(e){a.css("background-image","url("+e.target.result+")"),t.closest("label").find(".mdl-button").text("picture taken"),fullpageRebuild()},r.readAsDataURL(i.files[0])}}),t.off("click",".mdl-card__actions button").on("click",".mdl-card__actions button",function(e){r.trigger("submit")}),r.off("submit").on("submit",function(e){e.preventDefault();var a=$(e.target),r=new FormData(a[0]),n=t.find('button[type="submit"]');return $.ajax({url:""+urlBase+a.attr("action"),dataType:"json",type:a.attr("method"),data:r,beforeSend:function(){n.attr("disabled",!0),t.find(".parsley-errors-list.filled").remove().end().find(".mdl-progress").show()},success:function(e){i=Template.flash(e.status,e.message),t.find("[name="+e.element+"]").closest(".mdl-textfield").addClass("is-invalid")},error:function(e){i=Template.flash(!1,e.statusText)},complete:function(){n.attr("disabled",!1).before(i),t.find(".mdl-progress").hide(),fullpageRebuild()},cache:!1,contentType:!1,processData:!1}),!1});var n="https://maps.googleapis.com/maps/api/js?key=AIzaSyBjhGHb81MIdRsBEJhhSSUe78JLGIRhHJA&libraries=places&callback=initAutocomplete";0===$("body").find('script[src="'+n+'"]').length&&$("body").append('<script src="'+n+'"></script>');var o=function(){$("#register_coffeeshop").removeAttr("placeholder")};delay(o,700),fullpageRebuild()}}})};$(function(){"undefined"!=typeof FastClick&&FastClick.attach(document.body);var e=function(e,t){switch(e){case"registration":getRegistrationForm()}};$("#fullpage").fullpage({anchors:["main","registration"],responsiveWidth:500,fitToSection:!1,scrollOverflowOptions:{tap:!0},afterLoad:e})});